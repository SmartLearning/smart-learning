<div layout="row" layout-wrap flex layout-align-xs="space-around center" layout-padding>
    <md-button ng-click="vm.openSideNavMenu()" hide-gt-sm>
        <md-icon>menu</md-icon>
    </md-button>
    <div layout-margin>
        <a href="#"><img src="/content/images/logo.png"></a>
    </div>
    <span flex></span>
    <div layout="row" hide-xs hide-sm>
        <md-button href="/merchant-portal" target="_self" layout="row" layout-align="space-between center">
            <md-icon>business</md-icon>
            <label translate>global.menu.merchant_portal.button</label>
            <md-tooltip>
                <span translate>global.menu.merchant_portal.tooltip</span>
            </md-tooltip>
        </md-button>

        <md-button data-menu-item="login" ng-click="vm.login()" ng-if="!vm.isAuthenticated()"
                   layout-align-xs="start start">
            <md-icon>person_outline</md-icon>
            <label translate>global.menu.account.login</label>
        </md-button>

        <md-menu ng-if="vm.isAuthenticated() && (vm.isCta || vm.isIntegrator)" layout="row"
                 layout-align="space-between center">
            <div layout="row" layout-align="start center">
                <md-button md-menu-origin data-menu-item="selectMerchant" ng-click="$mdMenu.open($event)" aria-label="">
                    <md-icon>store_mall_directory</md-icon>
                    <span ng-if="vm.selectedMerchant">{{vm.selectedMerchant.login | capitalize}}</span>
                    <span ng-if="!vm.selectedMerchant" translate>global.menu.merchant.select</span>
                </md-button>
                <md-button class="md-icon-button" ng-if="vm.selectedMerchant" ng-click="vm.clearMerchant()">
                    <md-icon>clear</md-icon>
                </md-button>
            </div>
            <md-menu-content width="4" class="search-merchant-container">
                <form name="searchMerchantForm" layout="column">
                    <md-input-container class="md-margin" md-no-float>
                        <input type="text" placeholder="{{'global.menu.merchant.search' | translate}}"
                               ng-model="vm.merchantQuery" ng-change="vm.searchMerchant(vm.merchantQuery)"/>
                    </md-input-container>


                    <div flex ng-model="vm.selectedMerchant">
                        <div infinite-scroll="vm.nextPage()"
                             infinite-scroll-distance="4" infinite-scroll-disabled=false
                             infinite-scroll-container='".search-merchant-container"'>
                            <md-list-item class="md-3-line" ng-repeat="merchant in vm.merchants"
                                          ng-model-options="{trackBy: $value.id}"
                                          ng-click="vm.selectMerchant(merchant)" md-padding>
                                <div class="md-avatar">
                                    <ng-letter-avatar width="40" height="40" shape="round"
                                                      data="{{merchant.login}}"></ng-letter-avatar>
                                </div>
                                <div class="md-list-item-text" layout="column">
                                    <h3>{{merchant.login}}</h3>
                                    <h4><strong>{{merchant.firstName}} {{merchant.lastName}}</strong></h4>
                                    <p>{{merchant.email}}</p>
                                </div>
                                <md-divider></md-divider>
                            </md-list-item>
                        </div>
                    </div>
                </form>
            </md-menu-content>
        </md-menu>

        <md-menu ng-controller="LanguageController as vmLang">

            <md-button style="height: 100%;margin: auto;" md-menu-origin ng-click="$mdMenu.open($event)">
                <md-icon>language</md-icon>
                <label translate>global.menu.language</label>
            </md-button>

            <md-menu-content width="4">
                <md-menu-item ng-repeat="language in vmLang.languages">
                    <md-button ng-click="vmLang.changeLanguage(language)">
                        <label>{{language | findLanguageFromKey}}</label>
                    </md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>

        <md-menu ng-if="vm.isAuthenticated()">
            <md-button style="height: 100%;margin: auto;" md-menu-origin data-menu-item="person"
                       ng-click="$mdMenu.open($event)">
                <md-icon>person</md-icon>
                <span>{{vm.account.login | capitalize}}</span>
            </md-button>
            <md-menu-content width="4">
                <md-menu-item>
                    <md-button ng-click="vm.logout()">
                        <md-icon>power</md-icon>
                        <label translate>global.menu.account.logout</label>
                    </md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>

        <md-button href="https://wiki.hepsiburada.net/display/MSD" target="_blank" layout="row"
                   layout-align="space-between center">
            <md-icon>open_in_new</md-icon>
            <label translate>global.menu.sdw.button</label>
            <!--md-tooltip>
                <span translate>global.menu.sdw.tooltip</span>
            </md-tooltip-->
        </md-button>
    </div>
</div>

<md-content md-theme="navigation">
    <md-tabs ng-if="vm.isAuthenticated()" md-stretch-tabs md-border-bottom="true"
             md-no-select-click="true" class="md-primary md-hue-3" md-dynamic-height>

        <md-tab ng-repeat="value in vm.menus" ng-disabled="vm.checkForFunction(value.disabled)"
                ng-click="vm.headerClick(value)" md-active="vm.isCurrentPage(value.state)">
            <md-tab-label>
                <div layout="row" flex>
                    <md-icon ng-if="value.icon.indexOf(' ') > -1" md-font-icon="{{value.icon}}"></md-icon>
                    <md-icon ng-if="value.icon.indexOf(' ') == -1">{{value.icon}}</md-icon>
                    <notification-icon count="value.count">
                        <span data-tab-item="{{value.state.toLowerCase()}}">{{'global.menu.main.' + value.state.toLowerCase() | translate}}</span>
                    </notification-icon>
                </div>
            </md-tab-label>
            <md-tab-body>
                <md-tabs md-stretch-tabs md-border-bottom="true" ng-if="value.items.length"
                         md-no-select-click="true" md-dynamic-height class="md-accent hue-2">
                    <md-tab flex-order="{{menu.order}}" ng-repeat="menu in value.items"
                            md-active="vm.isCurrentPage(menu.state)"
                            ng-disabled="vm.checkForFunction(menu.disabled)"
                            ng-click="vm.state(menu.state)">
                        <md-tab-label>
                            <md-icon ng-if="menu.icon.indexOf(' ') > -1" md-font-icon="{{menu.icon}}"></md-icon>
                            <md-icon ng-if="menu.icon.indexOf(' ') == -1">{{menu.icon}}</md-icon>
                            <span data-tab-sub-item="{{menu.state}}">{{menu.text | translate}}</span>
                        </md-tab-label>
                    </md-tab>
                </md-tabs>
            </md-tab-body>
        </md-tab>
    </md-tabs>
</md-content>
